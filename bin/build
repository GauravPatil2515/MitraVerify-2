#!/bin/bash

# Render.com build script
# This file forces specific build behavior

echo "ğŸ”§ MitraVerify Build Script Starting..."

# Force Node.js version check
node_version=$(node --version)
echo "ğŸ“ Current Node.js version: $node_version"

# Navigate to frontend
cd mitraverify-frontend || exit 1

# Remove any Bun files
rm -f bun.lock bun.lockb package-lock.json

# Force npm installation
echo "ğŸ“¦ Installing dependencies with npm..."
npm install --legacy-peer-deps --no-package-lock

# Build with npm
echo "ğŸ—ï¸ Building with Next.js..."
npm run build

# Verify output
echo "âœ… Build completed!"
echo "ğŸ“ Output directory contents:"
ls -la out/

echo "ğŸ‰ MitraVerify build successful!"